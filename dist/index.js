"use strict";var e=require("commander"),a=require("fs-extra"),n=require("node:path"),o=require("@inquirer/prompts"),r=require("chalk"),i=require("progress-estimator"),t=require("log-symbols"),s=require("simple-git");const c=e=>console.log(t.info,e),l=require("figlet"),m={baseDir:process.cwd(),binary:"git",maxConcurrentProcesses:6,trimmed:!1},p=i({spinner:{interval:300,frames:["=","+","*","/"].map(e=>r.green(e))}});const g=new Map([["VITE-TYPESCRIPT-VUE-template",{name:"vue构建模板",downloadUrl:"https://git.aerospacex.cn:821/safe_workspace/client/app_pages.git",description:"vue构建模板",branch:"main"}],["VITE-TYPESCRIPT-H5-template",{name:"h5构建模板",downloadUrl:"https://git.aerospacex.cn:821/safe_workspace/client/app_pages.git",description:"h5构建模板",branch:"main"}]]),u=Array.from(g).map(e=>{const[a,n]=e;return{name:a,value:a,description:n.description}});async function d(e){e||(e=await o.input({message:"请输入项目名称"}));let i=n.resolve(process.cwd(),e);if(i){await async function(){return await o.select({message:"是否覆盖?",choices:[{name:"覆盖",value:!0},{name:"取消",value:!1}]})}()&&a.rmdir(i)}const t=await o.select({message:"请选择模板",choices:u}),d=g.get(t);console.log("templateName=",t),console.log("gitRepoInfo=",d),d&&await async function(e,a,n){const o=s(m);await p(o.clone(e,a,n),"正在下载中",{estimate:5e3}),console.log("下载完成"),console.log("=============================="),console.log("==欢迎下载daqiao-cli脚手架工具=="),console.log("=============================="),await l(r.green("daqiao cli")),c(`你可以执行命令${r.yellowBright("pnpm install")}来安装`),c(`你可以执行命令${r.yellowBright("npm run dev")}来运行`)}(d.downloadUrl,e,["-b","main"])}const w=new e.Command;w.command("create").description("创建一个项目").argument("[name]","输入项目名称").action(e=>{d(e)}),w.parse();
