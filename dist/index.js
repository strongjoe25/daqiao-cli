"use strict";var e=require("commander"),a=require("fs-extra"),o=require("node:path"),i=require("@inquirer/prompts"),n=require("chalk"),s=require("progress-estimator"),r=require("log-symbols"),t=require("simple-git");const c=e=>console.log(r.success,e),l=e=>console.log(r.info,e),m=require("figlet"),p={baseDir:process.cwd(),binary:"git",maxConcurrentProcesses:6,trimmed:!1},u=s({spinner:{interval:300,frames:["=","+","*","/"].map(e=>n.blue(e))}});const g=new Map([["VITE-TYPESCRIPT-VUE-template",{name:"vue构建模板",downloadUrl:"https://git.aerospacex.cn:821/safe_workspace/client/app_pages.git",description:"vue构建模板",branch:"main"}],["VITE-TYPESCRIPT-H5-template",{name:"h5构建模板",downloadUrl:"https://git.aerospacex.cn:821/gdbox/client/ui/h5pages.git",description:"h5构建模板",branch:"main"}],["VITE-TYPESCRIPT-CloudDisk-template",{name:"云盘构建模板",downloadUrl:"https://git.aerospacex.cn:821/qiaopengbo/h5pages_cloud_disk.git",description:"云盘构建模板",branch:"main"}]]),d=Array.from(g).map(e=>{const[a,o]=e;return{name:a,value:a,description:o.description}});async function w(e){e||(e=await i.input({message:"请输入项目名称"}));let s=o.resolve(process.cwd(),e);if(console.log("filepath=",s),a.existsSync(s)){await async function(){return await i.select({message:"是否覆盖?",choices:[{name:"覆盖",value:!0},{name:"取消",value:!1}]})}()&&await a.rm(s,{recursive:!0,force:!0})}const r=await i.select({message:"请选择模板",choices:d}),w=g.get(r);w&&await async function(e,a,o){const i=t(p);await u(i.clone(e,a,o),"正在下载中",{estimate:5e3}),console.log("下载完成"),console.log(n.blue("==============================")),console.log(n.blue("==欢迎下载daqiao-cli脚手架工具==")),console.log(n.blue("=============================="));const s=await m("欢迎使用 daqiao-cli脚手架");console.log(n.blue(s)),c(`项目创建成功 ${n.blueBright(a)}`),c("执行以下命令启动项目："),l(`cd ${n.yellowBright(a)}`),l(`${n.yellowBright("pnpm install")}`),l(`${n.yellowBright("npm run dev")}`)}(w.downloadUrl,e,["-b","main"])}const h=new e.Command("daqiao");h.version("1.0.1","-v, --version"),h.command("create").description("创建一个项目").argument("[name]","输入项目名称").action(e=>{w(e)}),h.parse();
